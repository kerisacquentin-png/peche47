
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pêche 47 Super Complet</title>

<style>
body { font-family: Arial, sans-serif; background-color: #e0f2e9; margin:0; padding:0; }
header { background-color: #2e7d32; color: white; text-align: center; padding: 15px; font-size: 24px; }
button { width: 90%; padding: 15px; margin: 10px auto; display: block; font-size: 18px; background-color: #388e3c; color: white; border: none; border-radius: 10px; }
section { padding: 15px; display: none; }
input, select { width: 95%; padding: 10px; margin:5px 0; font-size:16px; }
img { max-width: 100%; border-radius: 8px; margin-top: 8px; }
</style>
</head>

<body>

<header>Pêche 47</header>

<button onclick="showSection('journal')">Journal de captures</button>
<button onclick="showSection('spots')">Mes Spots</button>
<button onclick="showSection('leurres')">Conseils Montages / Leurres</button>
<button onclick="showSection('chat')">Chat Pêcheurs</button>

<!-- JOURNAL -->
<section id="journal">
<h2>Ajouter une capture</h2>
<input id="espece" placeholder="Espèce">
<input id="taille" type="number" placeholder="Taille (cm)">
<input id="poids" type="number" placeholder="Poids (kg)">
<input id="leurre" placeholder="Montage / Leurre">
<input id="grammage" type="number" placeholder="Grammage (g)">
<input id="photoCapture" type="file" accept="image/*">
<button onclick="addCapture()">Ajouter</button>
<div id="journalList"></div>
</section>

<!-- SPOTS -->
<section id="spots">
<h2>Ajouter un Spot</h2>
<input id="spotName" placeholder="Nom du spot">
<select id="typeEau">
  <option>Rivière</option>
  <option>Lac</option>
  <option>Étang</option>
</select>
<button onclick="addSpot()">Ajouter</button>
<div id="spotsList"></div>
</section>

<!-- LEURRES / MONTAGES -->
<section id="leurres">
<h2>Conseils Montages / Leurres</h2>

<select id="esp">
  <option>Brochet</option>
  <option>Sandre</option>
  <option>Perche</option>
  <option>Truite</option>
  <option>Black Bass</option>
  <option>Carpe</option>
  <option>Silure</option>
</select>

<select id="saison">
  <option>Printemps</option>
  <option>Été</option>
  <option>Automne</option>
  <option>Hiver</option>
</select>

<button onclick="conseilLeurre()">Obtenir conseil</button>
<div id="resultLeurre"></div>
</section>

<!-- CHAT -->
<section id="chat">
<h2>Chat Pêcheurs</h2>
<input id="chatMsg" placeholder="Votre message">
<input id="chatPhoto" type="file" accept="image/*">
<button onclick="addChatMessage()">Envoyer</button>
<div id="chatList"></div>
</section>

<script>
showSection('journal');

function showSection(id){
  document.querySelectorAll('section').forEach(s=>s.style.display='none');
  document.getElementById(id).style.display='block';
}

/* JOURNAL */
function addCapture(){
  const espece=especeInput('espece');
  const taille=especeInput('taille');
  const poids=especeInput('poids');
  const leurre=especeInput('leurre');
  const grammage=especeInput('grammage');
  const file=document.getElementById('photoCapture').files[0];

  if(file){
    const r=new FileReader();
    r.onload=e=>save(e.target.result);
    r.readAsDataURL(file);
  } else save('');

  function save(photo){
    const j=JSON.parse(localStorage.getItem('journal')||'[]');
    j.push({espece,taille,poids,leurre,grammage,photo});
    localStorage.setItem('journal',JSON.stringify(j));
    displayJournal();
  }
}

function displayJournal(){
  const j=JSON.parse(localStorage.getItem('journal')||'[]');
  journalList.innerHTML=j.map(c=>`
    <div>
      <b>${c.espece}</b> – ${c.taille}cm – ${c.poids}kg<br>
      ${c.leurre} (${c.grammage}g)
      ${c.photo?`<br><img src="${c.photo}">`:''}
    </div>`).join('');
}
displayJournal();

/* SPOTS */
function addSpot(){
  const s=JSON.parse(localStorage.getItem('spots')||'[]');
  s.push({name:spotName.value,type:typeEau.value});
  localStorage.setItem('spots',JSON.stringify(s));
  displaySpots();
}
function displaySpots(){
  const s=JSON.parse(localStorage.getItem('spots')||'[]');
  spotsList.innerHTML=s.map(x=>`<div>${x.name} (${x.type})</div>`).join('');
}
displaySpots();

/* CONSEILS */
function conseilLeurre(){
  const e=esp.value;
  const data={
    "Brochet":{txt:"Spinnerbait ou vif",img:"spinnerbait"},
    "Sandre":{txt:"Shad en verticale",img:"shad"},
    "Perche":{txt:"Drop shot léger",img:"drop_shot"},
    "Truite":{txt:"Cuillère ou PN",img:"cuillere"},
    "Black Bass":{txt:"Crankbait ou leurre souple",img:"crankbait"},
    "Carpe":{txt:"Pellets ou bouillettes",img:"pellet"},
    "Silure":{txt:"Montage vif",img:"montage_vif"}
  };
  const d=data[e];
  resultLeurre.innerHTML=`
    <h3>${e}</h3>
    <p>${d.txt}</p>
    <img src="images/montages/${d.img}.jpeg">
  `;
}

/* CHAT */
function addChatMessage(){
  const msg=chatMsg.value;
  const f=chatPhoto.files[0];
  if(f){
    const r=new FileReader();
    r.onload=e=>save(e.target.result);
    r.readAsDataURL(f);
  } else save('');

  function save(photo){
    const c=JSON.parse(localStorage.getItem('chat')||'[]');
    c.push({msg,photo});
    localStorage.setItem('chat',JSON.stringify(c));
    displayChat();
  }
}
function displayChat(){
  const c=JSON.parse(localStorage.getItem('chat')||'[]');
  chatList.innerHTML=c.map(m=>`
    <div>${m.msg}${m.photo?`<br><img src="${m.photo}">`:''}</div>
  `).join('');
}
displayChat();

function especeInput(id){ return document.getElementById(id).value; }
</script>

</body>
</html>
