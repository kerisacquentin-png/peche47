<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PÃªche 47 â€“ Guide intelligent</title>

<style>
body{margin:0;font-family:Arial;background:#e0f2e9}
header{background:#2e7d32;color:#fff;text-align:center;padding:15px;font-size:24px}
button{width:90%;padding:14px;margin:8px auto;display:block;font-size:18px;background:#388e3c;color:#fff;border:none;border-radius:10px}
section{display:none;padding:15px}
select,input{width:95%;padding:10px;margin:6px 0;font-size:16px}
img{width:100%;border-radius:8px;margin-top:8px}
.card{background:#fff;border-radius:12px;padding:12px;margin-bottom:12px}

.leurres-container{display:flex;gap:10px}
.leurre-card{flex:1;background:#f5f5f5;border-radius:10px;padding:10px;text-align:center}
</style>
</head>

<body>

<header>ðŸŽ£ PÃŠCHE 47 â€“ Guide de pÃªche</header>

<button onclick="show('journal')">Journal</button>
<button onclick="show('spots')">Spots</button>
<button onclick="show('conseils')">Conseils Montages / Leurres</button>

<!-- JOURNAL -->
<section id="journal">
<h2>Ajouter une capture</h2>
<input id="j_espece" placeholder="EspÃ¨ce">
<input id="j_taille" type="number" placeholder="Taille (cm)">
<input id="j_poids" type="number" placeholder="Poids (kg)">
<input id="j_leurre" placeholder="Montage / Leurre">
<input id="j_grammage" type="number" placeholder="Grammage (g)">
<input id="j_photo" type="file" accept="image/*">
<button onclick="addCapture()">Ajouter</button>
<div id="journalList"></div>
</section>

<!-- SPOTS -->
<section id="spots">
<h2>Mes spots</h2>
<input id="spotName" placeholder="Nom du spot">
<select id="spotType">
<option>RiviÃ¨re</option><option>Lac</option><option>Ã‰tang</option>
</select>
<button onclick="addSpot()">Ajouter</button>
<div id="spotsList"></div>
</section>

<!-- CONSEILS -->
<section id="conseils">
<h2>Conseils intelligents</h2>

<select id="esp">
<option>Brochet</option>
<option>Sandre</option>
<option>Perche</option>
<option>Truite</option>
<option>Black Bass</option>
<option>Silure</option>
</select>

<select id="saison">
<option>Printemps</option>
<option>Ã‰tÃ©</option>
<option>Automne</option>
<option>Hiver</option>
</select>

<select id="meteo">
<option>Soleil</option>
<option>Couvert</option>
<option>Pluie</option>
</select>

<select id="eau">
<option>Clair</option>
<option>Trouble</option>
</select>

<select id="profondeur">
<option>Peu profonde</option>
<option>Moyenne</option>
<option>Profonde</option>
</select>

<button onclick="conseil()">Voir conseils</button>
<div id="result"></div>
</section>

<script>
show('journal');

function show(id){
 document.querySelectorAll('section').forEach(s=>s.style.display='none');
 document.getElementById(id).style.display='block';
}

/* JOURNAL */
function addCapture(){
 const file=j_photo.files[0];
 const save=(photo)=>{
  const j=JSON.parse(localStorage.getItem('journal')||'[]');
  j.push({e:j_espece.value,t:j_taille.value,p:j_poids.value,l:j_leurre.value,g:j_grammage.value,photo});
  localStorage.setItem('journal',JSON.stringify(j));
  displayJournal();
 };
 if(file){const r=new FileReader();r.onload=e=>save(e.target.result);r.readAsDataURL(file);}
 else save('');
}
function displayJournal(){
 const j=JSON.parse(localStorage.getItem('journal')||'[]');
 journalList.innerHTML=j.map(c=>`
 <div class="card"><b>${c.e}</b> â€“ ${c.t}cm â€“ ${c.p}kg<br>
 ${c.l} (${c.g}g)${c.photo?`<img src="${c.photo}">`:''}</div>`).join('');
}
displayJournal();

/* SPOTS */
function addSpot(){
 const s=JSON.parse(localStorage.getItem('spots')||'[]');
 s.push({n:spotName.value,t:spotType.value});
 localStorage.setItem('spots',JSON.stringify(s));
 displaySpots();
}
function displaySpots(){
 const s=JSON.parse(localStorage.getItem('spots')||'[]');
 spotsList.innerHTML=s.map(x=>`<div class="card">${x.n} (${x.t})</div>`).join('');
}
displaySpots();

/* CONSEILS INTELLIGENTS */
function conseil(){
 const base={
 Brochet:{Printemps:["spinnerbait","shad"],Automne:["crankbait","swimbait"]},
 Sandre:{Hiver:["shad","tete_plombee"]},
 Perche:{Ã‰tÃ©:["drop_shot","shad"]},
 Truite:{Printemps:["cuillere","crankbait"]},
 "Black Bass":{Ã‰tÃ©:["frog","crankbait"]},
 Silure:{Ã‰tÃ©:["montage_vif","shad"]}
 };

 const espÃ¨ce=esp.value;
 const saisonChoisie=saison.value;
 const l=base[espÃ¨ce]?.[saisonChoisie];

 if(!l){result.innerHTML="<p>Aucun conseil prÃ©cis.</p>";return;}

 result.innerHTML=`
 <h3>${espÃ¨ce} â€“ ${saisonChoisie}</h3>
 <div class="leurres-container">
 ${l.map(x=>`
  <div class="leurre-card">
   <img src="images/montages/${x}.jpeg">
   <b>${x.replace('_',' ')}</b>
  </div>`).join('')}
 </div>`;
}
</script>

</body>
</html>
